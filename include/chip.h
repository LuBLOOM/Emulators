#ifndef _EMUD_CHIP_H_
#define _EMUD_CHIP_H_

#include <SDL2/SDL.h>
#include <GL/glew.h>
#include <GL/gl.h>
#include <GL/glu.h>

#include "../include/emud.h"

#define CHIP_WIDTH      64
#define CHIP_HEIGHT     32
#define CHIP_RAMSIZE    0x1000
#define CHIP_STACKSIZE  0x10
#define CHIP_REGSIZE    0x10
#define CHIP_ENTRYPOINT 0x200

static unsigned short pc;
static unsigned char  sp;
static unsigned char  ram[CHIP_RAMSIZE];
static unsigned int   stack[CHIP_STACKSIZE];
static unsigned short I;
static unsigned char  v[CHIP_REGSIZE];
static unsigned char  DT;
static unsigned char  ST;
static unsigned char  CHIP_FONT[80] = {
	0xf0, 0x90, 0x90, 0x90, 0xf0,
	0x20, 0x60, 0x20, 0x20, 0x70,
	0xf0, 0x10, 0xf0, 0x80, 0xf0,
	0xf0, 0x10, 0xf0, 0x10, 0xf0,
	0x90, 0x90, 0xf0, 0x10, 0x10,
	0xf0, 0x80, 0xf0, 0x10, 0xf0,
	0xf0, 0x80, 0xf0, 0x90, 0xf0,
	0xf0, 0x10, 0x20, 0x40, 0x40,
	0xf0, 0x90, 0xf0, 0x90, 0xf0,
	0xf0, 0x90, 0xf0, 0x10, 0xf0,
	0xf0, 0x90, 0xf0, 0x90, 0x90,
	0xe0, 0x90, 0xe0, 0x90, 0xe0,
	0xf0, 0x80, 0x80, 0x80, 0xf0,
	0xe0, 0x90, 0x90, 0x90, 0xe0,
	0xf0, 0x80, 0xf0, 0x80, 0xf0,
	0xf0, 0x80, 0xf0, 0x80, 0x80,
};
static unsigned int   chip_display[CHIP_WIDTH * CHIP_HEIGHT];
static unsigned int   chip_running;

static unsigned int   chip_shader;
static unsigned int   chip_texture;

void chip_init(void);
void chip_run(void);
void chip_exec(void);
int  chip_load(const char *);
void chip_event(void);
void chip_render(void);
void chip_free(void);

#endif /* _EMUD_CHIP_H_ */
